function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},a={},i={},r=n.parcelRequire1bb3;null==r&&((r=function(e){if(e in a)return a[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return a[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=new Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){i[e]=t},n.parcelRequire1bb3=r),r.register("27Lyk",(function(t,n){var a,i;e(t.exports,"register",(()=>a),(e=>a=e)),e(t.exports,"resolve",(()=>i),(e=>i=e));var r={};a=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)r[t[n]]=e[t[n]]},i=function(e){var t=r[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r("27Lyk").register(JSON.parse('{"gpNS7":"index.6336e772.js","EBXIW":"upload-worker.235831a9.js"}'));var s={};e(s,"default",(()=>un),(e=>un=e));var o={};function l(e){const t=parseInt(e,10);return isNaN(t)?null:t}function d(e,t){const n=Math.pow(10,t);return Math.round((e+Number.EPSILON)*n)/n}
/*! pako 2.1.0 https://github.com/nodeca/pako @license (MIT AND Zlib) */e(o,"fetchText",(()=>on),(e=>on=e)),e(o,"createDownloadUrlFromData",(()=>ln),(e=>ln=e)),e(o,"getFileSizeTextInReadableUnits",(()=>dn),(e=>dn=e)),e(o,"getMapFilename",(()=>hn),(e=>hn=e));function h(e){let t=e.length;for(;--t>=0;)e[t]=0}const c=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),f=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),p=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g=new Array(576);h(g);const m=new Array(60);h(m);const _=new Array(512);h(_);const w=new Array(256);h(w);const b=new Array(29);h(b);const v=new Array(30);function y(e,t,n,a,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=a,this.max_length=i,this.has_stree=e&&e.length}let k,x,E;function S(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}h(v);const z=e=>e<256?_[e]:_[256+(e>>>7)],I=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},D=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,I(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},A=(e,t,n)=>{D(e,n[2*t],n[2*t+1])},T=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},C=(e,t,n)=>{const a=new Array(16);let i,r,s=0;for(i=1;i<=15;i++)s=s+n[i-1]<<1,a[i]=s;for(r=0;r<=t;r++){let t=e[2*r+1];0!==t&&(e[2*r]=T(a[t]++,t))}},L=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},R=e=>{e.bi_valid>8?I(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},M=(e,t,n,a)=>{const i=2*t,r=2*n;return e[i]<e[r]||e[i]===e[r]&&a[t]<=a[n]},F=(e,t,n)=>{const a=e.heap[n];let i=n<<1;for(;i<=e.heap_len&&(i<e.heap_len&&M(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!M(t,a,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=a},Z=(e,t,n)=>{let a,i,r,s,o=0;if(0!==e.sym_next)do{a=255&e.pending_buf[e.sym_buf+o++],a+=(255&e.pending_buf[e.sym_buf+o++])<<8,i=e.pending_buf[e.sym_buf+o++],0===a?A(e,i,t):(r=w[i],A(e,r+256+1,t),s=c[r],0!==s&&(i-=b[r],D(e,i,s)),a--,r=z(a),A(e,r,n),s=u[r],0!==s&&(a-=v[r],D(e,a,s)))}while(o<e.sym_next);A(e,256,t)},U=(e,t)=>{const n=t.dyn_tree,a=t.stat_desc.static_tree,i=t.stat_desc.has_stree,r=t.stat_desc.elems;let s,o,l,d=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<r;s++)0!==n[2*s]?(e.heap[++e.heap_len]=d=s,e.depth[s]=0):n[2*s+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=d<2?++d:0,n[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=a[2*l+1]);for(t.max_code=d,s=e.heap_len>>1;s>=1;s--)F(e,n,s);l=r;do{s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],F(e,n,1),o=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=o,n[2*l]=n[2*s]+n[2*o],e.depth[l]=(e.depth[s]>=e.depth[o]?e.depth[s]:e.depth[o])+1,n[2*s+1]=n[2*o+1]=l,e.heap[1]=l++,F(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,a=t.max_code,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,l=t.stat_desc.max_length;let d,h,c,u,f,p,g=0;for(u=0;u<=15;u++)e.bl_count[u]=0;for(n[2*e.heap[e.heap_max]+1]=0,d=e.heap_max+1;d<573;d++)h=e.heap[d],u=n[2*n[2*h+1]+1]+1,u>l&&(u=l,g++),n[2*h+1]=u,h>a||(e.bl_count[u]++,f=0,h>=o&&(f=s[h-o]),p=n[2*h],e.opt_len+=p*(u+f),r&&(e.static_len+=p*(i[2*h+1]+f)));if(0!==g){do{for(u=l-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[l]--,g-=2}while(g>0);for(u=l;0!==u;u--)for(h=e.bl_count[u];0!==h;)c=e.heap[--d],c>a||(n[2*c+1]!==u&&(e.opt_len+=(u-n[2*c+1])*n[2*c],n[2*c+1]=u),h--)}})(e,t),C(n,d,e.bl_count)},N=(e,t,n)=>{let a,i,r=-1,s=t[1],o=0,l=7,d=4;for(0===s&&(l=138,d=3),t[2*(n+1)+1]=65535,a=0;a<=n;a++)i=s,s=t[2*(a+1)+1],++o<l&&i===s||(o<d?e.bl_tree[2*i]+=o:0!==i?(i!==r&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,r=i,0===s?(l=138,d=3):i===s?(l=6,d=3):(l=7,d=4))},O=(e,t,n)=>{let a,i,r=-1,s=t[1],o=0,l=7,d=4;for(0===s&&(l=138,d=3),a=0;a<=n;a++)if(i=s,s=t[2*(a+1)+1],!(++o<l&&i===s)){if(o<d)do{A(e,i,e.bl_tree)}while(0!=--o);else 0!==i?(i!==r&&(A(e,i,e.bl_tree),o--),A(e,16,e.bl_tree),D(e,o-3,2)):o<=10?(A(e,17,e.bl_tree),D(e,o-3,3)):(A(e,18,e.bl_tree),D(e,o-11,7));o=0,r=i,0===s?(l=138,d=3):i===s?(l=6,d=3):(l=7,d=4)}};let B=!1;const $=(e,t,n,a)=>{D(e,0+(a?1:0),3),R(e),I(e,n),I(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var P={_tr_init:e=>{B||((()=>{let e,t,n,a,i;const r=new Array(16);for(n=0,a=0;a<28;a++)for(b[a]=n,e=0;e<1<<c[a];e++)w[n++]=a;for(w[n-1]=a,i=0,a=0;a<16;a++)for(v[a]=i,e=0;e<1<<u[a];e++)_[i++]=a;for(i>>=7;a<30;a++)for(v[a]=i<<7,e=0;e<1<<u[a]-7;e++)_[256+i++]=a;for(t=0;t<=15;t++)r[t]=0;for(e=0;e<=143;)g[2*e+1]=8,e++,r[8]++;for(;e<=255;)g[2*e+1]=9,e++,r[9]++;for(;e<=279;)g[2*e+1]=7,e++,r[7]++;for(;e<=287;)g[2*e+1]=8,e++,r[8]++;for(C(g,287,r),e=0;e<30;e++)m[2*e+1]=5,m[2*e]=T(e,5);k=new y(g,c,257,286,15),x=new y(m,u,0,30,15),E=new y(new Array(0),f,0,19,7)})(),B=!0),e.l_desc=new S(e.dyn_ltree,k),e.d_desc=new S(e.dyn_dtree,x),e.bl_desc=new S(e.bl_tree,E),e.bi_buf=0,e.bi_valid=0,L(e)},_tr_stored_block:$,_tr_flush_block:(e,t,n,a)=>{let i,r,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),U(e,e.l_desc),U(e,e.d_desc),s=(e=>{let t;for(N(e,e.dyn_ltree,e.l_desc.max_code),N(e,e.dyn_dtree,e.d_desc.max_code),U(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*p[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),i=e.opt_len+3+7>>>3,r=e.static_len+3+7>>>3,r<=i&&(i=r)):i=r=n+5,n+4<=i&&-1!==t?$(e,t,n,a):4===e.strategy||r===i?(D(e,2+(a?1:0),3),Z(e,g,m)):(D(e,4+(a?1:0),3),((e,t,n,a)=>{let i;for(D(e,t-257,5),D(e,n-1,5),D(e,a-4,4),i=0;i<a;i++)D(e,e.bl_tree[2*p[i]+1],3);O(e,e.dyn_ltree,t-1),O(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),Z(e,e.dyn_ltree,e.dyn_dtree)),L(e),a&&R(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(w[n]+256+1)]++,e.dyn_dtree[2*z(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{D(e,2,3),A(e,256,g),(e=>{16===e.bi_valid?(I(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var j=(e,t,n,a)=>{let i=65535&e|0,r=e>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{i=i+t[a++]|0,r=r+i|0}while(--s);i%=65521,r%=65521}return i|r<<16|0};const H=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var a=0;a<8;a++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var q=(e,t,n,a)=>{const i=H,r=a+n;e^=-1;for(let n=a;n<r;n++)e=e>>>8^i[255&(e^t[n])];return-1^e},Y={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},G={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:V,_tr_stored_block:K,_tr_flush_block:X,_tr_tally:Q,_tr_align:W}=P,{Z_NO_FLUSH:J,Z_PARTIAL_FLUSH:ee,Z_FULL_FLUSH:te,Z_FINISH:ne,Z_BLOCK:ae,Z_OK:ie,Z_STREAM_END:re,Z_STREAM_ERROR:se,Z_DATA_ERROR:oe,Z_BUF_ERROR:le,Z_DEFAULT_COMPRESSION:de,Z_FILTERED:he,Z_HUFFMAN_ONLY:ce,Z_RLE:ue,Z_FIXED:fe,Z_DEFAULT_STRATEGY:pe,Z_UNKNOWN:ge,Z_DEFLATED:me}=G,_e=(e,t)=>(e.msg=Y[t],t),we=e=>2*e-(e>4?9:0),be=e=>{let t=e.length;for(;--t>=0;)e[t]=0},ve=e=>{let t,n,a,i=e.w_size;t=e.hash_size,a=t;do{n=e.head[--a],e.head[a]=n>=i?n-i:0}while(--t);t=i,a=t;do{n=e.prev[--a],e.prev[a]=n>=i?n-i:0}while(--t)};let ye=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const ke=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},xe=(e,t)=>{X(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ke(e.strm)},Ee=(e,t)=>{e.pending_buf[e.pending++]=t},Se=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},ze=(e,t,n,a)=>{let i=e.avail_in;return i>a&&(i=a),0===i?0:(e.avail_in-=i,t.set(e.input.subarray(e.next_in,e.next_in+i),n),1===e.state.wrap?e.adler=j(e.adler,t,i,n):2===e.state.wrap&&(e.adler=q(e.adler,t,i,n)),e.next_in+=i,e.total_in+=i,i)},Ie=(e,t)=>{let n,a,i=e.max_chain_length,r=e.strstart,s=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,d=e.window,h=e.w_mask,c=e.prev,u=e.strstart+258;let f=d[r+s-1],p=d[r+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,d[n+s]===p&&d[n+s-1]===f&&d[n]===d[r]&&d[++n]===d[r+1]){r+=2,n++;do{}while(d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&d[++r]===d[++n]&&r<u);if(a=258-(u-r),r=u-258,a>s){if(e.match_start=t,s=a,a>=o)break;f=d[r+s-1],p=d[r+s]}}}while((t=c[t&h])>l&&0!=--i);return s<=e.lookahead?s:e.lookahead},De=e=>{const t=e.w_size;let n,a,i;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-262)&&(e.window.set(e.window.subarray(t,t+t-a),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),ve(e),a+=t),0===e.strm.avail_in)break;if(n=ze(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=n,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=ye(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=ye(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},Ae=(e,t)=>{let n,a,i,r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,o=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i)break;if(i=e.strm.avail_out-i,a=e.strstart-e.block_start,n>a+e.strm.avail_in&&(n=a+e.strm.avail_in),n>i&&(n=i),n<r&&(0===n&&t!==ne||t===J||n!==a+e.strm.avail_in))break;s=t===ne&&n===a+e.strm.avail_in?1:0,K(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,ke(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(ze(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:t!==J&&t!==ne&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(ze(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,r=i>e.w_size?e.w_size:i,a=e.strstart-e.block_start,(a>=r||(a||t===ne)&&t!==J&&0===e.strm.avail_in&&a<=i)&&(n=a>i?i:a,s=t===ne&&0===e.strm.avail_in&&n===a?1:0,K(e,e.block_start,n,s),e.block_start+=n,ke(e.strm)),s?3:1)},Te=(e,t)=>{let n,a;for(;;){if(e.lookahead<262){if(De(e),e.lookahead<262&&t===J)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=Ie(e,n)),e.match_length>=3)if(a=Q(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=ye(e,e.ins_h,e.window[e.strstart+1]);else a=Q(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(a&&(xe(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===ne?(xe(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(xe(e,!1),0===e.strm.avail_out)?1:2},Ce=(e,t)=>{let n,a,i;for(;;){if(e.lookahead<262){if(De(e),e.lookahead<262&&t===J)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=Ie(e,n),e.match_length<=5&&(e.strategy===he||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,a=Q(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=ye(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,a&&(xe(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(a=Q(e,0,e.window[e.strstart-1]),a&&xe(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(a=Q(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===ne?(xe(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(xe(e,!1),0===e.strm.avail_out)?1:2};function Le(e,t,n,a,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=a,this.func=i}const Re=[new Le(0,0,0,0,Ae),new Le(4,4,8,4,Te),new Le(4,5,16,8,Te),new Le(4,6,32,32,Te),new Le(4,4,16,16,Ce),new Le(8,16,32,32,Ce),new Le(8,16,128,128,Ce),new Le(8,32,128,256,Ce),new Le(32,128,258,1024,Ce),new Le(32,258,258,4096,Ce)];function Me(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=me,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),be(this.dyn_ltree),be(this.dyn_dtree),be(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),be(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),be(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Fe=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||42!==t.status&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&113!==t.status&&666!==t.status?1:0},Ze=e=>{if(Fe(e))return _e(e,se);e.total_in=e.total_out=0,e.data_type=ge;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,V(t),ie},Ue=e=>{const t=Ze(e);var n;return t===ie&&((n=e.state).window_size=2*n.w_size,be(n.head),n.max_lazy_match=Re[n.level].max_lazy,n.good_match=Re[n.level].good_length,n.nice_match=Re[n.level].nice_length,n.max_chain_length=Re[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Ne=(e,t,n,a,i,r)=>{if(!e)return se;let s=1;if(t===de&&(t=6),a<0?(s=0,a=-a):a>15&&(s=2,a-=16),i<1||i>9||n!==me||a<8||a>15||t<0||t>9||r<0||r>fe||8===a&&1!==s)return _e(e,se);8===a&&(a=9);const o=new Me;return e.state=o,o.strm=e,o.status=42,o.wrap=s,o.gzhead=null,o.w_bits=a,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=r,o.method=n,Ue(e)};var Oe={deflateInit:(e,t)=>Ne(e,t,me,15,8,pe),deflateInit2:Ne,deflateReset:Ue,deflateResetKeep:Ze,deflateSetHeader:(e,t)=>Fe(e)||2!==e.state.wrap?se:(e.state.gzhead=t,ie),deflate:(e,t)=>{if(Fe(e)||t>ae||t<0)return e?_e(e,se):se;const n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==ne)return _e(e,0===e.avail_out?le:se);const a=n.last_flush;if(n.last_flush=t,0!==n.pending){if(ke(e),0===e.avail_out)return n.last_flush=-1,ie}else if(0===e.avail_in&&we(t)<=we(a)&&t!==ne)return _e(e,le);if(666===n.status&&0!==e.avail_in)return _e(e,le);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status){let t=me+(n.w_bits-8<<4)<<8,a=-1;if(a=n.strategy>=ce||n.level<2?0:n.level<6?1:6===n.level?2:3,t|=a<<6,0!==n.strstart&&(t|=32),t+=31-t%31,Se(n,t),0!==n.strstart&&(Se(n,e.adler>>>16),Se(n,65535&e.adler)),e.adler=1,n.status=113,ke(e),0!==n.pending)return n.last_flush=-1,ie}if(57===n.status)if(e.adler=0,Ee(n,31),Ee(n,139),Ee(n,8),n.gzhead)Ee(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),Ee(n,255&n.gzhead.time),Ee(n,n.gzhead.time>>8&255),Ee(n,n.gzhead.time>>16&255),Ee(n,n.gzhead.time>>24&255),Ee(n,9===n.level?2:n.strategy>=ce||n.level<2?4:0),Ee(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(Ee(n,255&n.gzhead.extra.length),Ee(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=q(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(Ee(n,0),Ee(n,0),Ee(n,0),Ee(n,0),Ee(n,0),Ee(n,9===n.level?2:n.strategy>=ce||n.level<2?4:0),Ee(n,3),n.status=113,ke(e),0!==n.pending)return n.last_flush=-1,ie;if(69===n.status){if(n.gzhead.extra){let t=n.pending,a=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+a>n.pending_buf_size;){let i=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=q(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=i,ke(e),0!==n.pending)return n.last_flush=-1,ie;t=0,a-=i}let i=new Uint8Array(n.gzhead.extra);n.pending_buf.set(i.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending+=a,n.gzhead.hcrc&&n.pending>t&&(e.adler=q(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,a=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(e.adler=q(e.adler,n.pending_buf,n.pending-a,a)),ke(e),0!==n.pending)return n.last_flush=-1,ie;a=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,Ee(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>a&&(e.adler=q(e.adler,n.pending_buf,n.pending-a,a)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,a=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>a&&(e.adler=q(e.adler,n.pending_buf,n.pending-a,a)),ke(e),0!==n.pending)return n.last_flush=-1,ie;a=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,Ee(n,t)}while(0!==t);n.gzhead.hcrc&&n.pending>a&&(e.adler=q(e.adler,n.pending_buf,n.pending-a,a))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(ke(e),0!==n.pending))return n.last_flush=-1,ie;Ee(n,255&e.adler),Ee(n,e.adler>>8&255),e.adler=0}if(n.status=113,ke(e),0!==n.pending)return n.last_flush=-1,ie}if(0!==e.avail_in||0!==n.lookahead||t!==J&&666!==n.status){let a=0===n.level?Ae(n,t):n.strategy===ce?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(De(e),0===e.lookahead)){if(t===J)return 1;break}if(e.match_length=0,n=Q(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(xe(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ne?(xe(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(xe(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===ue?((e,t)=>{let n,a,i,r;const s=e.window;for(;;){if(e.lookahead<=258){if(De(e),e.lookahead<=258&&t===J)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=e.strstart-1,a=s[i],a===s[++i]&&a===s[++i]&&a===s[++i])){r=e.strstart+258;do{}while(a===s[++i]&&a===s[++i]&&a===s[++i]&&a===s[++i]&&a===s[++i]&&a===s[++i]&&a===s[++i]&&a===s[++i]&&i<r);e.match_length=258-(r-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=Q(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=Q(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(xe(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===ne?(xe(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(xe(e,!1),0===e.strm.avail_out)?1:2})(n,t):Re[n.level].func(n,t);if(3!==a&&4!==a||(n.status=666),1===a||3===a)return 0===e.avail_out&&(n.last_flush=-1),ie;if(2===a&&(t===ee?W(n):t!==ae&&(K(n,0,0,!1),t===te&&(be(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),ke(e),0===e.avail_out))return n.last_flush=-1,ie}return t!==ne?ie:n.wrap<=0?re:(2===n.wrap?(Ee(n,255&e.adler),Ee(n,e.adler>>8&255),Ee(n,e.adler>>16&255),Ee(n,e.adler>>24&255),Ee(n,255&e.total_in),Ee(n,e.total_in>>8&255),Ee(n,e.total_in>>16&255),Ee(n,e.total_in>>24&255)):(Se(n,e.adler>>>16),Se(n,65535&e.adler)),ke(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?ie:re)},deflateEnd:e=>{if(Fe(e))return se;const t=e.state.status;return e.state=null,113===t?_e(e,oe):ie},deflateSetDictionary:(e,t)=>{let n=t.length;if(Fe(e))return se;const a=e.state,i=a.wrap;if(2===i||1===i&&42!==a.status||a.lookahead)return se;if(1===i&&(e.adler=j(e.adler,t,n,0)),a.wrap=0,n>=a.w_size){0===i&&(be(a.head),a.strstart=0,a.block_start=0,a.insert=0);let e=new Uint8Array(a.w_size);e.set(t.subarray(n-a.w_size,n),0),t=e,n=a.w_size}const r=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,De(a);a.lookahead>=3;){let e=a.strstart,t=a.lookahead-2;do{a.ins_h=ye(a,a.ins_h,a.window[e+3-1]),a.prev[e&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=e,e++}while(--t);a.strstart=e,a.lookahead=2,De(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=2,a.match_available=0,e.next_in=s,e.input=o,e.avail_in=r,a.wrap=i,ie},deflateInfo:"pako deflate (from Nodeca project)"};const Be=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var $e=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)Be(n,t)&&(e[t]=n[t])}}return e},Pe=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,a=0,i=e.length;t<i;t++){let i=e[t];n.set(i,a),a+=i.length}return n};let je=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){je=!1}const He=new Uint8Array(256);for(let e=0;e<256;e++)He[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;He[254]=He[254]=1;var qe=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,a,i,r,s=e.length,o=0;for(i=0;i<s;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(a=e.charCodeAt(i+1),56320==(64512&a)&&(n=65536+(n-55296<<10)+(a-56320),i++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),r=0,i=0;r<o;i++)n=e.charCodeAt(i),55296==(64512&n)&&i+1<s&&(a=e.charCodeAt(i+1),56320==(64512&a)&&(n=65536+(n-55296<<10)+(a-56320),i++)),n<128?t[r++]=n:n<2048?(t[r++]=192|n>>>6,t[r++]=128|63&n):n<65536?(t[r++]=224|n>>>12,t[r++]=128|n>>>6&63,t[r++]=128|63&n):(t[r++]=240|n>>>18,t[r++]=128|n>>>12&63,t[r++]=128|n>>>6&63,t[r++]=128|63&n);return t},Ye=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let a,i;const r=new Array(2*n);for(i=0,a=0;a<n;){let t=e[a++];if(t<128){r[i++]=t;continue}let s=He[t];if(s>4)r[i++]=65533,a+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&a<n;)t=t<<6|63&e[a++],s--;s>1?r[i++]=65533:t<65536?r[i++]=t:(t-=65536,r[i++]=55296|t>>10&1023,r[i++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&je)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let a=0;a<t;a++)n+=String.fromCharCode(e[a]);return n})(r,i)},Ge=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+He[e[n]]>t?n:t};var Ve=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ke=Object.prototype.toString,{Z_NO_FLUSH:Xe,Z_SYNC_FLUSH:Qe,Z_FULL_FLUSH:We,Z_FINISH:Je,Z_OK:et,Z_STREAM_END:tt,Z_DEFAULT_COMPRESSION:nt,Z_DEFAULT_STRATEGY:at,Z_DEFLATED:it}=G;function rt(e){this.options=$e({level:nt,method:it,chunkSize:16384,windowBits:15,memLevel:8,strategy:at},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ve,this.strm.avail_out=0;let n=Oe.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==et)throw new Error(Y[n]);if(t.header&&Oe.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?qe(t.dictionary):"[object ArrayBuffer]"===Ke.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Oe.deflateSetDictionary(this.strm,e),n!==et)throw new Error(Y[n]);this._dict_set=!0}}function st(e,t){const n=new rt(t);if(n.push(e,!0),n.err)throw n.msg||Y[n.err];return n.result}rt.prototype.push=function(e,t){const n=this.strm,a=this.options.chunkSize;let i,r;if(this.ended)return!1;for(r=t===~~t?t:!0===t?Je:Xe,"string"==typeof e?n.input=qe(e):"[object ArrayBuffer]"===Ke.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),(r===Qe||r===We)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(i=Oe.deflate(n,r),i===tt)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=Oe.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===et;if(0!==n.avail_out){if(r>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},rt.prototype.onData=function(e){this.chunks.push(e)},rt.prototype.onEnd=function(e){e===et&&(this.result=Pe(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var ot={Deflate:rt,deflate:st,deflateRaw:function(e,t){return(t=t||{}).raw=!0,st(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,st(e,t)},constants:G};var lt=function(e,t){let n,a,i,r,s,o,l,d,h,c,u,f,p,g,m,_,w,b,v,y,k,x,E,S;const z=e.state;n=e.next_in,E=e.input,a=n+(e.avail_in-5),i=e.next_out,S=e.output,r=i-(t-e.avail_out),s=i+(e.avail_out-257),o=z.dmax,l=z.wsize,d=z.whave,h=z.wnext,c=z.window,u=z.hold,f=z.bits,p=z.lencode,g=z.distcode,m=(1<<z.lenbits)-1,_=(1<<z.distbits)-1;e:do{f<15&&(u+=E[n++]<<f,f+=8,u+=E[n++]<<f,f+=8),w=p[u&m];t:for(;;){if(b=w>>>24,u>>>=b,f-=b,b=w>>>16&255,0===b)S[i++]=65535&w;else{if(!(16&b)){if(0==(64&b)){w=p[(65535&w)+(u&(1<<b)-1)];continue t}if(32&b){z.mode=16191;break e}e.msg="invalid literal/length code",z.mode=16209;break e}v=65535&w,b&=15,b&&(f<b&&(u+=E[n++]<<f,f+=8),v+=u&(1<<b)-1,u>>>=b,f-=b),f<15&&(u+=E[n++]<<f,f+=8,u+=E[n++]<<f,f+=8),w=g[u&_];n:for(;;){if(b=w>>>24,u>>>=b,f-=b,b=w>>>16&255,!(16&b)){if(0==(64&b)){w=g[(65535&w)+(u&(1<<b)-1)];continue n}e.msg="invalid distance code",z.mode=16209;break e}if(y=65535&w,b&=15,f<b&&(u+=E[n++]<<f,f+=8,f<b&&(u+=E[n++]<<f,f+=8)),y+=u&(1<<b)-1,y>o){e.msg="invalid distance too far back",z.mode=16209;break e}if(u>>>=b,f-=b,b=i-r,y>b){if(b=y-b,b>d&&z.sane){e.msg="invalid distance too far back",z.mode=16209;break e}if(k=0,x=c,0===h){if(k+=l-b,b<v){v-=b;do{S[i++]=c[k++]}while(--b);k=i-y,x=S}}else if(h<b){if(k+=l+h-b,b-=h,b<v){v-=b;do{S[i++]=c[k++]}while(--b);if(k=0,h<v){b=h,v-=b;do{S[i++]=c[k++]}while(--b);k=i-y,x=S}}}else if(k+=h-b,b<v){v-=b;do{S[i++]=c[k++]}while(--b);k=i-y,x=S}for(;v>2;)S[i++]=x[k++],S[i++]=x[k++],S[i++]=x[k++],v-=3;v&&(S[i++]=x[k++],v>1&&(S[i++]=x[k++]))}else{k=i-y;do{S[i++]=S[k++],S[i++]=S[k++],S[i++]=S[k++],v-=3}while(v>2);v&&(S[i++]=S[k++],v>1&&(S[i++]=S[k++]))}break}}break}}while(n<a&&i<s);v=f>>3,n-=v,f-=v<<3,u&=(1<<f)-1,e.next_in=n,e.next_out=i,e.avail_in=n<a?a-n+5:5-(n-a),e.avail_out=i<s?s-i+257:257-(i-s),z.hold=u,z.bits=f};const dt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ht=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ct=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ut=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ft=(e,t,n,a,i,r,s,o)=>{const l=o.bits;let d,h,c,u,f,p,g=0,m=0,_=0,w=0,b=0,v=0,y=0,k=0,x=0,E=0,S=null;const z=new Uint16Array(16),I=new Uint16Array(16);let D,A,T,C=null;for(g=0;g<=15;g++)z[g]=0;for(m=0;m<a;m++)z[t[n+m]]++;for(b=l,w=15;w>=1&&0===z[w];w--);if(b>w&&(b=w),0===w)return i[r++]=20971520,i[r++]=20971520,o.bits=1,0;for(_=1;_<w&&0===z[_];_++);for(b<_&&(b=_),k=1,g=1;g<=15;g++)if(k<<=1,k-=z[g],k<0)return-1;if(k>0&&(0===e||1!==w))return-1;for(I[1]=0,g=1;g<15;g++)I[g+1]=I[g]+z[g];for(m=0;m<a;m++)0!==t[n+m]&&(s[I[t[n+m]]++]=m);if(0===e?(S=C=s,p=20):1===e?(S=dt,C=ht,p=257):(S=ct,C=ut,p=0),E=0,m=0,g=_,f=r,v=b,y=0,c=-1,x=1<<b,u=x-1,1===e&&x>852||2===e&&x>592)return 1;for(;;){D=g-y,s[m]+1<p?(A=0,T=s[m]):s[m]>=p?(A=C[s[m]-p],T=S[s[m]-p]):(A=96,T=0),d=1<<g-y,h=1<<v,_=h;do{h-=d,i[f+(E>>y)+h]=D<<24|A<<16|T|0}while(0!==h);for(d=1<<g-1;E&d;)d>>=1;if(0!==d?(E&=d-1,E+=d):E=0,m++,0==--z[g]){if(g===w)break;g=t[n+s[m]]}if(g>b&&(E&u)!==c){for(0===y&&(y=b),f+=_,v=g-y,k=1<<v;v+y<w&&(k-=z[v+y],!(k<=0));)v++,k<<=1;if(x+=1<<v,1===e&&x>852||2===e&&x>592)return 1;c=E&u,i[c]=b<<24|v<<16|f-r|0}}return 0!==E&&(i[f+E]=g-y<<24|4194304),o.bits=b,0};const{Z_FINISH:pt,Z_BLOCK:gt,Z_TREES:mt,Z_OK:_t,Z_STREAM_END:wt,Z_NEED_DICT:bt,Z_STREAM_ERROR:vt,Z_DATA_ERROR:yt,Z_MEM_ERROR:kt,Z_BUF_ERROR:xt,Z_DEFLATED:Et}=G,St=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function zt(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const It=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<16180||t.mode>16211?1:0},Dt=e=>{if(It(e))return vt;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,_t},At=e=>{if(It(e))return vt;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Dt(e)},Tt=(e,t)=>{let n;if(It(e))return vt;const a=e.state;return t<0?(n=0,t=-t):(n=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?vt:(null!==a.window&&a.wbits!==t&&(a.window=null),a.wrap=n,a.wbits=t,At(e))},Ct=(e,t)=>{if(!e)return vt;const n=new zt;e.state=n,n.strm=e,n.window=null,n.mode=16180;const a=Tt(e,t);return a!==_t&&(e.state=null),a};let Lt,Rt,Mt=!0;const Ft=e=>{if(Mt){Lt=new Int32Array(512),Rt=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ft(1,e.lens,0,288,Lt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ft(2,e.lens,0,32,Rt,0,e.work,{bits:5}),Mt=!1}e.lencode=Lt,e.lenbits=9,e.distcode=Rt,e.distbits=5},Zt=(e,t,n,a)=>{let i;const r=e.state;return null===r.window&&(r.wsize=1<<r.wbits,r.wnext=0,r.whave=0,r.window=new Uint8Array(r.wsize)),a>=r.wsize?(r.window.set(t.subarray(n-r.wsize,n),0),r.wnext=0,r.whave=r.wsize):(i=r.wsize-r.wnext,i>a&&(i=a),r.window.set(t.subarray(n-a,n-a+i),r.wnext),(a-=i)?(r.window.set(t.subarray(n-a,n),0),r.wnext=a,r.whave=r.wsize):(r.wnext+=i,r.wnext===r.wsize&&(r.wnext=0),r.whave<r.wsize&&(r.whave+=i))),0};var Ut={inflateReset:At,inflateReset2:Tt,inflateResetKeep:Dt,inflateInit:e=>Ct(e,15),inflateInit2:Ct,inflate:(e,t)=>{let n,a,i,r,s,o,l,d,h,c,u,f,p,g,m,_,w,b,v,y,k,x,E=0;const S=new Uint8Array(4);let z,I;const D=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(It(e)||!e.output||!e.input&&0!==e.avail_in)return vt;n=e.state,16191===n.mode&&(n.mode=16192),s=e.next_out,i=e.output,l=e.avail_out,r=e.next_in,a=e.input,o=e.avail_in,d=n.hold,h=n.bits,c=o,u=l,x=_t;e:for(;;)switch(n.mode){case 16180:if(0===n.wrap){n.mode=16192;break}for(;h<16;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}if(2&n.wrap&&35615===d){0===n.wbits&&(n.wbits=15),n.check=0,S[0]=255&d,S[1]=d>>>8&255,n.check=q(n.check,S,2,0),d=0,h=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&d)<<8)+(d>>8))%31){e.msg="incorrect header check",n.mode=16209;break}if((15&d)!==Et){e.msg="unknown compression method",n.mode=16209;break}if(d>>>=4,h-=4,k=8+(15&d),0===n.wbits&&(n.wbits=k),k>15||k>n.wbits){e.msg="invalid window size",n.mode=16209;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&d?16189:16191,d=0,h=0;break;case 16181:for(;h<16;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}if(n.flags=d,(255&n.flags)!==Et){e.msg="unknown compression method",n.mode=16209;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=16209;break}n.head&&(n.head.text=d>>8&1),512&n.flags&&4&n.wrap&&(S[0]=255&d,S[1]=d>>>8&255,n.check=q(n.check,S,2,0)),d=0,h=0,n.mode=16182;case 16182:for(;h<32;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}n.head&&(n.head.time=d),512&n.flags&&4&n.wrap&&(S[0]=255&d,S[1]=d>>>8&255,S[2]=d>>>16&255,S[3]=d>>>24&255,n.check=q(n.check,S,4,0)),d=0,h=0,n.mode=16183;case 16183:for(;h<16;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}n.head&&(n.head.xflags=255&d,n.head.os=d>>8),512&n.flags&&4&n.wrap&&(S[0]=255&d,S[1]=d>>>8&255,n.check=q(n.check,S,2,0)),d=0,h=0,n.mode=16184;case 16184:if(1024&n.flags){for(;h<16;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}n.length=d,n.head&&(n.head.extra_len=d),512&n.flags&&4&n.wrap&&(S[0]=255&d,S[1]=d>>>8&255,n.check=q(n.check,S,2,0)),d=0,h=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(f=n.length,f>o&&(f=o),f&&(n.head&&(k=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(a.subarray(r,r+f),k)),512&n.flags&&4&n.wrap&&(n.check=q(n.check,a,f,r)),o-=f,r+=f,n.length-=f),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break e;f=0;do{k=a[r+f++],n.head&&k&&n.length<65536&&(n.head.name+=String.fromCharCode(k))}while(k&&f<o);if(512&n.flags&&4&n.wrap&&(n.check=q(n.check,a,f,r)),o-=f,r+=f,k)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break e;f=0;do{k=a[r+f++],n.head&&k&&n.length<65536&&(n.head.comment+=String.fromCharCode(k))}while(k&&f<o);if(512&n.flags&&4&n.wrap&&(n.check=q(n.check,a,f,r)),o-=f,r+=f,k)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;h<16;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}if(4&n.wrap&&d!==(65535&n.check)){e.msg="header crc mismatch",n.mode=16209;break}d=0,h=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=16191;break;case 16189:for(;h<32;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}e.adler=n.check=St(d),d=0,h=0,n.mode=16190;case 16190:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=r,e.avail_in=o,n.hold=d,n.bits=h,bt;e.adler=n.check=1,n.mode=16191;case 16191:if(t===gt||t===mt)break e;case 16192:if(n.last){d>>>=7&h,h-=7&h,n.mode=16206;break}for(;h<3;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}switch(n.last=1&d,d>>>=1,h-=1,3&d){case 0:n.mode=16193;break;case 1:if(Ft(n),n.mode=16199,t===mt){d>>>=2,h-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=16209}d>>>=2,h-=2;break;case 16193:for(d>>>=7&h,h-=7&h;h<32;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}if((65535&d)!=(d>>>16^65535)){e.msg="invalid stored block lengths",n.mode=16209;break}if(n.length=65535&d,d=0,h=0,n.mode=16194,t===mt)break e;case 16194:n.mode=16195;case 16195:if(f=n.length,f){if(f>o&&(f=o),f>l&&(f=l),0===f)break e;i.set(a.subarray(r,r+f),s),o-=f,r+=f,l-=f,s+=f,n.length-=f;break}n.mode=16191;break;case 16196:for(;h<14;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}if(n.nlen=257+(31&d),d>>>=5,h-=5,n.ndist=1+(31&d),d>>>=5,h-=5,n.ncode=4+(15&d),d>>>=4,h-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=16209;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;h<3;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}n.lens[D[n.have++]]=7&d,d>>>=3,h-=3}for(;n.have<19;)n.lens[D[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,z={bits:n.lenbits},x=ft(0,n.lens,0,19,n.lencode,0,n.work,z),n.lenbits=z.bits,x){e.msg="invalid code lengths set",n.mode=16209;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;E=n.lencode[d&(1<<n.lenbits)-1],m=E>>>24,_=E>>>16&255,w=65535&E,!(m<=h);){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}if(w<16)d>>>=m,h-=m,n.lens[n.have++]=w;else{if(16===w){for(I=m+2;h<I;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}if(d>>>=m,h-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=16209;break}k=n.lens[n.have-1],f=3+(3&d),d>>>=2,h-=2}else if(17===w){for(I=m+3;h<I;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}d>>>=m,h-=m,k=0,f=3+(7&d),d>>>=3,h-=3}else{for(I=m+7;h<I;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}d>>>=m,h-=m,k=0,f=11+(127&d),d>>>=7,h-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=16209;break}for(;f--;)n.lens[n.have++]=k}}if(16209===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=16209;break}if(n.lenbits=9,z={bits:n.lenbits},x=ft(1,n.lens,0,n.nlen,n.lencode,0,n.work,z),n.lenbits=z.bits,x){e.msg="invalid literal/lengths set",n.mode=16209;break}if(n.distbits=6,n.distcode=n.distdyn,z={bits:n.distbits},x=ft(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,z),n.distbits=z.bits,x){e.msg="invalid distances set",n.mode=16209;break}if(n.mode=16199,t===mt)break e;case 16199:n.mode=16200;case 16200:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=r,e.avail_in=o,n.hold=d,n.bits=h,lt(e,u),s=e.next_out,i=e.output,l=e.avail_out,r=e.next_in,a=e.input,o=e.avail_in,d=n.hold,h=n.bits,16191===n.mode&&(n.back=-1);break}for(n.back=0;E=n.lencode[d&(1<<n.lenbits)-1],m=E>>>24,_=E>>>16&255,w=65535&E,!(m<=h);){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}if(_&&0==(240&_)){for(b=m,v=_,y=w;E=n.lencode[y+((d&(1<<b+v)-1)>>b)],m=E>>>24,_=E>>>16&255,w=65535&E,!(b+m<=h);){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}d>>>=b,h-=b,n.back+=b}if(d>>>=m,h-=m,n.back+=m,n.length=w,0===_){n.mode=16205;break}if(32&_){n.back=-1,n.mode=16191;break}if(64&_){e.msg="invalid literal/length code",n.mode=16209;break}n.extra=15&_,n.mode=16201;case 16201:if(n.extra){for(I=n.extra;h<I;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}n.length+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;E=n.distcode[d&(1<<n.distbits)-1],m=E>>>24,_=E>>>16&255,w=65535&E,!(m<=h);){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}if(0==(240&_)){for(b=m,v=_,y=w;E=n.distcode[y+((d&(1<<b+v)-1)>>b)],m=E>>>24,_=E>>>16&255,w=65535&E,!(b+m<=h);){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}d>>>=b,h-=b,n.back+=b}if(d>>>=m,h-=m,n.back+=m,64&_){e.msg="invalid distance code",n.mode=16209;break}n.offset=w,n.extra=15&_,n.mode=16203;case 16203:if(n.extra){for(I=n.extra;h<I;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}n.offset+=d&(1<<n.extra)-1,d>>>=n.extra,h-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=16209;break}n.mode=16204;case 16204:if(0===l)break e;if(f=u-l,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=16209;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),g=n.window}else g=i,p=s-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do{i[s++]=g[p++]}while(--f);0===n.length&&(n.mode=16200);break;case 16205:if(0===l)break e;i[s++]=n.length,l--,n.mode=16200;break;case 16206:if(n.wrap){for(;h<32;){if(0===o)break e;o--,d|=a[r++]<<h,h+=8}if(u-=l,e.total_out+=u,n.total+=u,4&n.wrap&&u&&(e.adler=n.check=n.flags?q(n.check,i,u,s-u):j(n.check,i,u,s-u)),u=l,4&n.wrap&&(n.flags?d:St(d))!==n.check){e.msg="incorrect data check",n.mode=16209;break}d=0,h=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;h<32;){if(0===o)break e;o--,d+=a[r++]<<h,h+=8}if(4&n.wrap&&d!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=16209;break}d=0,h=0}n.mode=16208;case 16208:x=wt;break e;case 16209:x=yt;break e;case 16210:return kt;default:return vt}return e.next_out=s,e.avail_out=l,e.next_in=r,e.avail_in=o,n.hold=d,n.bits=h,(n.wsize||u!==e.avail_out&&n.mode<16209&&(n.mode<16206||t!==pt))&&Zt(e,e.output,e.next_out,u-e.avail_out),c-=e.avail_in,u-=e.avail_out,e.total_in+=c,e.total_out+=u,n.total+=u,4&n.wrap&&u&&(e.adler=n.check=n.flags?q(n.check,i,u,e.next_out-u):j(n.check,i,u,e.next_out-u)),e.data_type=n.bits+(n.last?64:0)+(16191===n.mode?128:0)+(16199===n.mode||16194===n.mode?256:0),(0===c&&0===u||t===pt)&&x===_t&&(x=xt),x},inflateEnd:e=>{if(It(e))return vt;let t=e.state;return t.window&&(t.window=null),e.state=null,_t},inflateGetHeader:(e,t)=>{if(It(e))return vt;const n=e.state;return 0==(2&n.wrap)?vt:(n.head=t,t.done=!1,_t)},inflateSetDictionary:(e,t)=>{const n=t.length;let a,i,r;return It(e)?vt:(a=e.state,0!==a.wrap&&16190!==a.mode?vt:16190===a.mode&&(i=1,i=j(i,t,n,0),i!==a.check)?yt:(r=Zt(e,t,n,n),r?(a.mode=16210,kt):(a.havedict=1,_t)))},inflateInfo:"pako inflate (from Nodeca project)"};var Nt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ot=Object.prototype.toString,{Z_NO_FLUSH:Bt,Z_FINISH:$t,Z_OK:Pt,Z_STREAM_END:jt,Z_NEED_DICT:Ht,Z_STREAM_ERROR:qt,Z_DATA_ERROR:Yt,Z_MEM_ERROR:Gt}=G;function Vt(e){this.options=$e({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ve,this.strm.avail_out=0;let n=Ut.inflateInit2(this.strm,t.windowBits);if(n!==Pt)throw new Error(Y[n]);if(this.header=new Nt,Ut.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=qe(t.dictionary):"[object ArrayBuffer]"===Ot.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ut.inflateSetDictionary(this.strm,t.dictionary),n!==Pt)))throw new Error(Y[n])}function Kt(e,t){const n=new Vt(t);if(n.push(e),n.err)throw n.msg||Y[n.err];return n.result}Vt.prototype.push=function(e,t){const n=this.strm,a=this.options.chunkSize,i=this.options.dictionary;let r,s,o;if(this.ended)return!1;for(s=t===~~t?t:!0===t?$t:Bt,"[object ArrayBuffer]"===Ot.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(a),n.next_out=0,n.avail_out=a),r=Ut.inflate(n,s),r===Ht&&i&&(r=Ut.inflateSetDictionary(n,i),r===Pt?r=Ut.inflate(n,s):r===Yt&&(r=Ht));n.avail_in>0&&r===jt&&n.state.wrap>0&&0!==e[n.next_in];)Ut.inflateReset(n),r=Ut.inflate(n,s);switch(r){case qt:case Yt:case Ht:case Gt:return this.onEnd(r),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||r===jt))if("string"===this.options.to){let e=Ge(n.output,n.next_out),t=n.next_out-e,i=Ye(n.output,e);n.next_out=t,n.avail_out=a-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(r!==Pt||0!==o){if(r===jt)return r=Ut.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Vt.prototype.onData=function(e){this.chunks.push(e)},Vt.prototype.onEnd=function(e){e===Pt&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Pe(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Xt={Inflate:Vt,inflate:Kt,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Kt(e,t)},ungzip:Kt,constants:G};const{Deflate:Qt,deflate:Wt,deflateRaw:Jt,gzip:en}=ot,{Inflate:tn,inflate:nn,inflateRaw:an,ungzip:rn}=Xt;var sn=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{l(a.next(e))}catch(e){r(e)}}function o(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};function on(e){return sn(this,void 0,void 0,(function*(){return yield fetch(e).then((e=>{if(!e.ok)throw new Error(`Fetch response was not OK: ${e.status}`);return e.text()})).catch((e=>{throw e}))}))}function ln(e,t){const n=new Blob([e],{type:t});return URL.createObjectURL(n)}function dn(e){if(e<1024)return`${e} bytes`;if(e<1048576){return`${d(e/1024,2)} kB`}return`${d(e/1048576,2)} MB`}function hn(e){return`map_${e}.dat`}var cn=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{l(a.next(e))}catch(e){r(e)}}function o(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};class un extends HTMLElement{static get elementName(){throw new Error(`The class '${this.name}' must implement the elementName getter.`)}static get subdirectory(){throw new Error(`The class '${this.name}' must implement the subdirectory getter.`)}static get htmlPath(){return`/elements/autonomous/${this.subdirectory}/${this.elementName}.html`}static define(){return cn(this,void 0,void 0,(function*(){void 0===customElements.get(this.elementName)&&(this.htmlContent=yield(0,o.fetchText)(this.htmlPath),customElements.define(this.elementName,this))}))}constructor(){var e;super(),this.isInitialized=!1,this.attachShadow({mode:"open"});const t=this.constructor,n=document.createRange().createContextualFragment(t.htmlContent);null===(e=this.shadowRoot)||void 0===e||e.appendChild(n.cloneNode(!0))}connectedCallback(){this.isConnected&&!this.isInitialized&&(this.initialize(),this.isInitialized=!0)}initialize(){}getShadowElement(e){var t;const n=null===(t=this.shadowRoot)||void 0===t?void 0:t.getElementById(e);if(null===n)throw new Error(`Could not find element with id '${e}'.`);return n}}un.htmlContent="";class fn extends s.default{static get subdirectory(){return"containers"}constructor(){super()}initialize(){}}function pn(e){return"detail"in e}class gn extends fn{static get elementName(){return"application-container"}constructor(){super(),this.onMapIdUpdated=e=>{if(!pn(e))throw new Error("Event is not a custom event.");this.settingsPanel.mapId=e.detail.mapId},this.onFileDragOver=e=>{e.preventDefault()},this.onFileDropped=e=>{e.preventDefault()},this.topPanel=this.getShadowElement("top-panel"),this.settingsPanel=this.getShadowElement("settings-panel"),this.uploadsPanel=this.getShadowElement("uploads-panel")}initialize(){this.addEventListener("mapIdUpdated",this.onMapIdUpdated),this.addEventListener("dragover",this.onFileDragOver),this.addEventListener("drop",this.onFileDropped)}registerSettingsPanelEventListeners(){this.settingsPanel.registerEventListeners()}}class mn extends fn{static get elementName(){return"top-panel"}constructor(){super()}initialize(){}}var _n={};e(_n,"default",(()=>Tn),(e=>Tn=e));var wn={};e(wn,"default",(()=>Dn),(e=>Dn=e));const bn=new Map([["fit",{displayText:"Fit",defaultSelected:!0}],["fill",{displayText:"Fill (Crop)"}],["stretch",{displayText:"Stretch"}]]),vn=new Map([["pixelated",{displayText:"None (Pixelated)"}],["low",{displayText:"Low"}],["medium",{displayText:"Medium"}],["high",{displayText:"High",defaultSelected:!0}]]),yn=new Map([["transparent",{displayText:"Transparent",defaultSelected:!0}],["black",{displayText:"Black"}],["white",{displayText:"White"}]]),kn=new Map([["compuphase",{displayText:"CompuPhase",defaultSelected:!0}],["euclidean",{displayText:"Euclidean"}],["deltae-1976",{displayText:"DeltaE 1976"}],["cmc-1984",{displayText:"CMC 1984"}],["deltae-2000",{displayText:"DeltaE 2000"}]]),xn=new Map([["none",{displayText:"None"}],["floyd-steinberg",{displayText:"Floyd-Steinberg",defaultSelected:!0}]]);class En{constructor(e){this.mapId=0,this.minecraftVersion="21w16a",this.resize="fit",this.resizeQuality="high",this.background="transparent",this.colorDifference="compuphase",this.dithering="floyd-steinberg",this.transparency=128,this.autoDownload=!0,Object.assign(this,e)}get resizeDisplayText(){var e;return null===(e=bn.get(this.resize))||void 0===e?void 0:e.displayText}get resizeQualityDisplayText(){var e;return null===(e=vn.get(this.resizeQuality))||void 0===e?void 0:e.displayText}get backgroundDisplayText(){var e;return null===(e=yn.get(this.background))||void 0===e?void 0:e.displayText}get colorDifferenceDisplayText(){var e;return null===(e=kn.get(this.colorDifference))||void 0===e?void 0:e.displayText}get ditheringDisplayText(){var e;return null===(e=xn.get(this.dithering))||void 0===e?void 0:e.displayText}get useLabColorSpace(){switch(this.colorDifference){case"compuphase":case"euclidean":return!1;case"deltae-1976":case"cmc-1984":case"deltae-2000":return!0;default:throw new Error(`Invalid color difference algorithm: ${this.colorDifference}`)}}}var Sn;Sn=JSON.parse('{"version":"0.1.0"}');var zn=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{l(a.next(e))}catch(e){r(e)}}function o(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};class In{constructor(){this.settingsKey="settings"}loadSettings(){return zn(this,void 0,void 0,(function*(){const e=yield this.loadSettingsObject();return new En(e)}))}loadSettingsObject(){return zn(this,void 0,void 0,(function*(){const e=yield In.getAppVersion(),t=localStorage.getItem(this.settingsKey);if(null!==t){const n=JSON.parse(t);if(n.appVersion===e)return n}return{appVersion:e}}))}saveSettings(e){const t=JSON.stringify(e);localStorage.setItem(this.settingsKey,t)}clearSettings(){localStorage.remove(this.settingsKey)}static getAppVersion(){return zn(this,void 0,void 0,(function*(){return t(Sn).version}))}}var Dn=new In,An=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{l(a.next(e))}catch(e){r(e)}}function o(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};var Tn=new class{constructor(){}init(){return An(this,void 0,void 0,(function*(){const e=yield wn.default.loadSettings();this.settings=e}))}};class Cn{constructor(e,t,n){this.id=e,this.name=t,this.date=n}}class Ln extends Cn{constructor(e,t,n,a,i,r){super(e,t,n),this.baseColors=a,this.mapColorsRGB=i,this.mapColorsLab=r}}var Rn;function Mn(e,t){let n=e.length;Array.isArray(e[0])||(e=[e]),Array.isArray(t[0])||(t=t.map((e=>[e])));let a=t[0].length,i=t[0].map(((e,n)=>t.map((e=>e[n])))),r=e.map((e=>i.map((t=>{let n=0;if(!Array.isArray(e)){for(let a of t)n+=e*a;return n}for(let a=0;a<e.length;a++)n+=e[a]*(t[a]||0);return n}))));return 1===n&&(r=r[0]),1===a?r.map((e=>e[0])):r}function Fn(e){return"string"===Zn(e)}function Zn(e){return(Object.prototype.toString.call(e).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function Un(e,t){e=+e,t=+t;let n=(Math.floor(e)+"").length;if(t>n)return+e.toFixed(t-n);{let a=10**(n-t);return Math.round(e/a)*a}}function Nn(e,t,n){return a=t[0],i=t[1],r=function(e,t,n){return(n-e)/(t-e)}(e[0],e[1],n),isNaN(a)?i:isNaN(i)?a:a+(i-a)*r;var a,i,r}Rn=JSON.parse('{"versions":[{"id":"1.8.1-pre1","name":"Java 1.8.1 to 1.11","date":"2014-10-15T07:00:00.000Z","base_colors":["transparent","#7fb238","#f7e9a3","#c7c7c7","#ff0000","#a0a0ff","#a7a7a7","#007c00","#ffffff","#a4a8b8","#976d4d","#707070","#4040ff","#8f7748","#fffcf5","#d87f33","#b24cd8","#6699d8","#e5e533","#7fcc19","#f27fa5","#4c4c4c","#999999","#4c7f99","#7f3fb2","#334cb2","#664c33","#667f33","#993333","#191919","#faee4d","#5cdbd5","#4a80ff","#00d93a","#815631","#700200"]},{"id":"17w17a","name":"Java 1.12 to 1.15","date":"2017-04-26T07:00:00.000Z","base_colors":["#d1b1a1","#9f5224","#95576c","#706c8a","#ba8524","#677535","#a04d4e","#392923","#876b62","#575c5c","#7a4958","#4c3e5c","#4c3223","#4c522a","#8e3c2e","#251610"]},{"id":"20w21a","name":null,"date":"2020-05-20T07:00:00.000Z","base_colors":[]},{"id":"1.16-pre6","name":"Java 1.16","date":"2020-06-15T07:00:00.000Z","base_colors":["#bd3031","#943f61","#5c191d","#167e86","#3a8e8c","#562c3e","#14b485"]},{"id":"21w15a","name":null,"date":"2021-04-14T07:00:00.000Z","base_colors":["#646464","#d8af93"]},{"id":"21w16a","name":"Java 1.17 to 1.19","date":"2021-04-21T07:00:00.000Z","base_colors":["#7fa796"]}]}');var On=new class{add(e,t,n){if("string"==typeof arguments[0])(Array.isArray(e)?e:[e]).forEach((function(e){this[e]=this[e]||[],t&&this[e][n?"unshift":"push"](t)}),this);else for(var e in arguments[0])this.add(e,arguments[0][e],arguments[1])}run(e,t){this[e]=this[e]||[],this[e].forEach((function(e){e.call(t&&t.context?t.context:t,t)}))}};const Bn={D50:[.3457/.3585,1,.8251046025104602],D65:[.3127/.329,1,1.0890577507598784]};function $n(e){return Array.isArray(e)?e:Bn[e]}function Pn(e,t,n,a={}){if(e=$n(e),t=$n(t),!e||!t)throw new TypeError(`Missing white point to convert ${e?"":"from"}${e||t?"":"/"}${t?"":"to"}`);if(e===t)return n;let i={W1:e,W2:t,XYZ:n,options:a};if(On.run("chromatic-adaptation-start",i),i.M||(i.W1===Bn.D65&&i.W2===Bn.D50?i.M=[[1.0479298208405488,.022946793341019088,-.05019222954313557],[.029627815688159344,.990434484573249,-.01707382502938514],[-.009243058152591178,.015055144896577895,.7518742899580008]]:i.W1===Bn.D50&&i.W2===Bn.D65&&(i.M=[[.9554734527042182,-.023098536874261423,.0632593086610217],[-.028369706963208136,1.0099954580058226,.021041398966943008],[.012314001688319899,-.020507696433477912,1.3303659366080753]])),On.run("chromatic-adaptation-end",i),i.M)return Mn(i.M,i.XYZ);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}class jn{constructor(e){this.id=e.id,this.name=e.name,this.base=e.base?jn.get(e.base):null,this.aliases=e.aliases,this.base&&(this.fromBase=e.fromBase,this.toBase=e.toBase);let t=e.coords??this.base.coords;this.coords=t;let n=e.white??this.base.white??"D65";this.white=$n(n),this.formats=e.formats??{};for(let e in this.formats){let t=this.formats[e];t.type||="function",t.name||=e}e.cssId&&!this.formats.functions?.color?(this.formats.color={id:e.cssId},Object.defineProperty(this,"cssId",{value:e.cssId})):this.formats?.color&&!this.formats?.color.id&&(this.formats.color.id=this.id),this.referred=e.referred,this.#e=this.#t().reverse(),On.run("colorspace-init-end",this)}inGamut(e,{epsilon:t=75e-6}={}){if(this.isPolar)return e=this.toBase(e),this.base.inGamut(e,{epsilon:t});let n=Object.values(this.coords);return e.every(((e,a)=>{let i=n[a];if("angle"!==i.type&&i.range){if(Number.isNaN(e))return!0;let[n,a]=i.range;return(void 0===n||e>=n-t)&&(void 0===a||e<=a+t)}return!0}))}get cssId(){return this.formats.functions?.color?.id||this.id}get isPolar(){for(let e in this.coords)if("angle"===this.coords[e].type)return!0;return!1}#n(e){if(e.coords&&!e.coordGrammar){e.type||="function",e.name||="color",e.coordGrammar=e.coords.map((e=>e.split("|").map((e=>{let t=(e=e.trim()).match(/^(<[a-z]+>)\[(-?[.\d]+),\s*(-?[.\d]+)\]?$/);if(t){let e=new String(t[1]);return e.range=[+t[2],+t[3]],e}return e}))));let t=Object.entries(this.coords).map((([t,n],a)=>{let i=e.coordGrammar[a][0],r=n.range||n.refRange,s=i.range,o="";return"<percentage>"==i?(s=[0,100],o="%"):"<angle>"==i&&(o="deg"),{fromRange:r,toRange:s,suffix:o}}));e.serializeCoords=(e,n)=>e.map(((e,a)=>{let{fromRange:i,toRange:r,suffix:s}=t[a];return i&&r&&(e=Nn(i,r,e)),e=Un(e,n),s&&(e+=s),e}))}return e}getFormat(e){if("object"==typeof e)return e=this.#n(e);let t;return t="default"===e?Object.values(this.formats)[0]:this.formats[e],t?(t=this.#n(t),t):null}#e;#t(){let e=[this];for(let t=this;t=t.base;)e.push(t);return e}to(e,t){if(1===arguments.length&&([e,t]=[e.space,e.coords]),this===(e=jn.get(e)))return t;t=t.map((e=>Number.isNaN(e)?0:e));let n,a,i=this.#e,r=e.#e;for(let e=0;e<i.length&&i[e]===r[e];e++)n=i[e],a=e;if(!n)throw new Error(`Cannot convert between color spaces ${this} and ${e}: no connection space was found`);for(let e=i.length-1;e>a;e--)t=i[e].toBase(t);for(let e=a+1;e<r.length;e++)t=r[e].fromBase(t);return t}from(e,t){return 1===arguments.length&&([e,t]=[e.space,e.coords]),(e=jn.get(e)).to(this,t)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let e=[];for(let t in this.coords){let n=this.coords[t],a=n.range||n.refRange;e.push(a?.min??0)}return e}static registry={};static get all(){return[...new Set(Object.values(jn.registry))]}static register(e,t){if(1===arguments.length&&(e=(t=arguments[0]).id),t=this.get(t),this.registry[e]&&this.registry[e]!==t)throw new Error(`Duplicate color space registration: '${e}'`);if(this.registry[e]=t,1===arguments.length&&t.aliases)for(let e of t.aliases)this.register(e,t);return t}static get(e,...t){if(!e||e instanceof jn)return e;if("string"===Zn(e)){let t=jn.registry[e.toLowerCase()];if(!t)throw new TypeError(`No color space found with id = "${e}"`);return t}if(t.length)return jn.get(...t);throw new TypeError(`${e} is not a valid color space`)}static resolveCoord(e,t){let n,a,i=Zn(e);if("string"===i?e.includes(".")?[n,a]=e.split("."):[n,a]=[,e]:Array.isArray(e)?[n,a]=e:(n=e.space,a=e.coordId),n=jn.get(n),n||(n=t),!n)throw new TypeError(`Cannot resolve coordinate reference ${e}: No color space specified and relative references are not allowed here`);if(i=Zn(a),"number"===i||"string"===i&&a>=0){let e=Object.entries(n.coords)[a];if(e)return{space:n,id:e[0],index:a,...e[1]}}n=jn.get(n);let r=a.toLowerCase(),s=0;for(let e in n.coords){let t=n.coords[e];if(e.toLowerCase()===r||t.name?.toLowerCase()===r)return{space:n,id:e,index:s,...t};s++}throw new TypeError(`No "${a}" coordinate found in ${n.name}. Its coordinates are: ${Object.keys(n.coords).join(", ")}`)}static DEFAULT_FORMAT={type:"functions",name:"color"}}var Hn=new jn({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]}),qn=new jn({id:"xyz-d50",name:"XYZ D50",white:"D50",base:Hn,fromBase:e=>Pn(Hn.white,"D50",e),toBase:e=>Pn("D50",Hn.white,e),formats:{color:{}}});let Yn=Bn.D50;var Gn=new jn({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"L"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:Yn,base:qn,fromBase(e){let t=e.map(((e,t)=>e/Yn[t])).map((e=>e>.008856451679035631?Math.cbrt(e):(903.2962962962963*e+16)/116));return[116*t[1]-16,500*(t[0]-t[1]),200*(t[1]-t[2])]},toBase(e){let t=[];return t[1]=(e[0]+16)/116,t[0]=e[1]/500+t[1],t[2]=t[1]-e[2]/200,[t[0]>.20689655172413793?Math.pow(t[0],3):(116*t[0]-16)/903.2962962962963,e[0]>8?Math.pow((e[0]+16)/116,3):e[0]/903.2962962962963,t[2]>.20689655172413793?Math.pow(t[2],3):(116*t[2]-16)/903.2962962962963].map(((e,t)=>e*Yn[t]))},formats:{lab:{coords:["<number> | <percentage>","<number>","<number>"]}}});function Vn(e){let t={str:String(e)?.trim()};if(On.run("parse-start",t),t.color)return t.color;if(t.parsed=function(e){if(!e)return;e=e.trim();const t=/^-?[\d.]+$/;let n=e.match(/^([a-z]+)\((.+?)\)$/i);if(n){let e=[];return n[2].replace(/\/?\s*([-\w.]+(?:%|deg)?)/g,((n,a)=>{/%$/.test(a)?(a=new Number(a.slice(0,-1)/100)).type="<percentage>":/deg$/.test(a)?((a=new Number(+a.slice(0,-3))).type="<angle>",a.unit="deg"):t.test(a)&&((a=new Number(a)).type="<number>"),n.startsWith("/")&&((a=a instanceof Number?a:new Number(a)).alpha=!0),e.push(a)})),{name:n[1].toLowerCase(),rawName:n[1],rawArgs:n[2],args:e}}}(t.str),t.parsed){let e=t.parsed.name;if("color"===e){let e=t.parsed.args.shift(),n=t.parsed.rawArgs.indexOf("/")>0?t.parsed.args.pop():1;for(let a of jn.all){let i=a.getFormat("color");if(i&&(e===i.id||i.ids?.includes(e))){let e=Object.keys(a.coords).length,i=Array(e).fill(0);return i.forEach(((e,n)=>i[n]=t.parsed.args[n]||0)),{spaceId:a.id,coords:i,alpha:n}}}let a="";if(e in jn.registry){let t=jn.registry[e].formats?.functions?.color?.id;t&&(a=`Did you mean color(${t})?`)}throw new TypeError(`Cannot parse color(${e}). `+(a||"Missing a plugin?"))}for(let a of jn.all){let i=a.getFormat(e);if(i&&"function"===i.type){let r=1;(i.lastAlpha||(n=t.parsed.args,n[n.length-1]).alpha)&&(r=t.parsed.args.pop());let s=t.parsed.args;return i.coordGrammar&&Object.entries(a.coords).forEach((([t,n],a)=>{let r=i.coordGrammar[a],o=s[a]?.type;if(r=r.find((e=>e==o)),!r){let a=n.name||t;throw new TypeError(`${o} not allowed for ${a} in ${e}()`)}let l=r.range;"<percentage>"===o&&(l||=[0,1]);let d=n.range||n.refRange;l&&d&&(s[a]=Nn(l,d,s[a]))})),{spaceId:a.id,coords:s,alpha:r}}}}else for(let e of jn.all)for(let n in e.formats){let a=e.formats[n];if("custom"!==a.type)continue;if(a.test&&!a.test(t.str))continue;let i=a.parse(t.str);if(i)return i.alpha??=1,i}var n;throw new TypeError(`Could not parse ${e} as a color. Missing a plugin?`)}class Kn extends jn{constructor(e){e.coords||(e.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),e.base||(e.base=Hn),e.toXYZ_M&&e.fromXYZ_M&&(e.toBase??=t=>{let n=Mn(e.toXYZ_M,t);return this.white!==this.base.white&&(n=Pn(this.white,this.base.white,n)),n},e.fromBase??=t=>(t=Pn(this.base.white,this.white,t),Mn(e.fromXYZ_M,t))),e.referred??="display",super(e)}}var Xn=new Kn({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],fromXYZ_M:[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]],formats:{color:{}}}),Qn={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[.6,50/255,.8],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,.6],lightslategrey:[119/255,136/255,.6],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[.4,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,.8],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[.4,.2,.6],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let Wn=Array(3).fill("<percentage> | <number>[0, 255]"),Jn=Array(3).fill("<number>[0, 255]");var ea=new Kn({id:"srgb",name:"sRGB",base:Xn,fromBase:e=>e.map((e=>{let t=e<0?-1:1,n=e*t;return n>.0031308?t*(1.055*n**(1/2.4)-.055):12.92*e})),toBase:e=>e.map((e=>{let t=e<0?-1:1,n=e*t;return n<.04045?e/12.92:t*((n+.055)/1.055)**2.4})),formats:{rgb:{coords:Wn},rgb_number:{name:"rgb",commas:!0,coords:Jn,noAlpha:!0},color:{},rgba:{coords:Wn,commas:!0,lastAlpha:!0},rgba_number:{name:"rgba",commas:!0,coords:Jn},hex:{type:"custom",toGamut:!0,test:e=>/^#([a-f0-9]{3,4}){1,2}$/i.test(e),parse(e){e.length<=5&&(e=e.replace(/[a-f0-9]/gi,"$&$&"));let t=[];return e.replace(/[a-f0-9]{2}/gi,(e=>{t.push(parseInt(e,16)/255)})),{spaceId:"srgb",coords:t.slice(0,3),alpha:t.slice(3)[0]}},serialize:(e,t,{collapse:n=!0}={})=>{t<1&&e.push(t),e=e.map((e=>Math.round(255*e)));let a=n&&e.every((e=>e%17==0));return"#"+e.map((e=>a?(e/17).toString(16):e.toString(16).padStart(2,"0"))).join("")}},keyword:{type:"custom",test:e=>/^[a-z]+$/i.test(e),parse(e){let t={spaceId:"srgb",coords:null,alpha:1};if("transparent"===(e=e.toLowerCase())?(t.coords=Qn.black,t.alpha=0):t.coords=Qn[e],t.coords)return t}}}});function ta(e){if(!e)throw new TypeError("Empty color reference");Fn(e)&&(e=Vn(e));let t=e.space||e.spaceId;return t instanceof jn||(e.space=jn.get(t)),void 0===e.alpha&&(e.alpha=1),e}var na={gamut_mapping:"lch.c",precision:5,deltaE:"76"};function aa(e){return(e%360+360)%360}var ia=new jn({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Gn,fromBase(e){let t,[n,a,i]=e;return t=Math.abs(a)<.02&&Math.abs(i)<.02?NaN:180*Math.atan2(i,a)/Math.PI,[n,Math.sqrt(a**2+i**2),aa(t)]},toBase(e){let[t,n,a]=e;return n<0&&(n=0),isNaN(a)&&(a=0),[t,n*Math.cos(a*Math.PI/180),n*Math.sin(a*Math.PI/180)]},formats:{lch:{coords:["<number> | <percentage>","<number>","<number> | <angle>"]}}});const ra=Math.PI,sa=180/ra,oa=ra/180;function la(e,t,{kL:n=1,kC:a=1,kH:i=1}={}){let[r,s,o]=Gn.from(e),l=ia.from(Gn,[r,s,o])[1],[d,h,c]=Gn.from(t),u=ia.from(Gn,[d,h,c])[1];l<0&&(l=0),u<0&&(u=0);let f=((l+u)/2)**7,p=.5*(1-Math.sqrt(f/(f+6103515625))),g=(1+p)*s,m=(1+p)*h,_=Math.sqrt(g**2+o**2),w=Math.sqrt(m**2+c**2),b=0===g&&0===o?0:Math.atan2(o,g),v=0===m&&0===c?0:Math.atan2(c,m);b<0&&(b+=2*ra),v<0&&(v+=2*ra),b*=sa,v*=sa;let y,k=d-r,x=w-_,E=v-b,S=b+v,z=Math.abs(E);_*w==0?y=0:z<=180?y=E:E>180?y=E-360:E<-180?y=E+360:console.log("the unthinkable has happened");let I,D=2*Math.sqrt(w*_)*Math.sin(y*oa/2),A=(r+d)/2,T=(_+w)/2,C=Math.pow(T,7);I=_*w==0?S:z<=180?S/2:S<360?(S+360)/2:(S-360)/2;let L=(A-50)**2,R=1+.015*L/Math.sqrt(20+L),M=1+.045*T,F=1;F-=.17*Math.cos((I-30)*oa),F+=.24*Math.cos(2*I*oa),F+=.32*Math.cos((3*I+6)*oa),F-=.2*Math.cos((4*I-63)*oa);let Z=1+.015*T*F,U=30*Math.exp(-1*((I-275)/25)**2),N=2*Math.sqrt(C/(C+6103515625)),O=(k/(n*R))**2;return O+=(x/(a*M))**2,O+=(D/(i*Z))**2,O+=-1*Math.sin(2*U*oa)*N*(x/(a*M))*(D/(i*Z)),Math.sqrt(O)}function da(e,t=e.space,{epsilon:n=75e-6}={}){e=ta(e),t=jn.get(t);let a=e.coords;return t!==e.space&&(a=t.from(e)),t.inGamut(a,{epsilon:n})}function ha(e,t){return(t=jn.get(t)).from(e)}function ca(e,t){let{space:n,index:a}=jn.resolveCoord(t,e.space);return ha(e,n)[a]}function ua(e,t,n){return t=jn.get(t),e.coords=t.to(e.space,n),e}function fa(e,t,n){if(e=ta(e),2===arguments.length&&"object"===Zn(arguments[1])){let t=arguments[1];for(let n in t)fa(e,n,t[n])}else{"function"==typeof n&&(n=n(ca(e,t)));let{space:a,index:i}=jn.resolveCoord(t,e.space),r=ha(e,a);r[i]=n,ua(e,a,r)}return e}function pa(e){return{space:e.space,coords:e.coords.slice(),alpha:e.alpha}}function ga(e,{method:t=na.gamut_mapping,space:n=e.space}={}){if(Fn(arguments[1])&&(n=arguments[1]),da(e,n=jn.get(n),{epsilon:0}))return e;let a=ma(e,n);if("clip"!==t&&!da(e,n)){let i=ga(pa(a),{method:"clip",space:n});if(la(e,i)>2){let e=jn.resolveCoord(t),i=e.space,r=e.id,s=ma(a,i),o=.01,l=(e.range||e.refRange)[0],d=ca(s,r);for(;d-l>o;){let e=pa(s);e=ga(e,{space:n,method:"clip"}),la(s,e)-2<o?l=ca(s,r):d=ca(s,r),fa(s,r,(l+d)/2)}a=ma(s,n)}else a=i}if("clip"===t||!da(a,n,{epsilon:0})){let e=Object.values(n.coords).map((e=>e.range||[]));a.coords=a.coords.map(((t,n)=>{let[a,i]=e[n];return void 0!==a&&(t=Math.max(a,t)),void 0!==i&&(t=Math.min(t,i)),t}))}return n!==e.space&&(a=ma(a,e.space)),e.coords=a.coords,e}function ma(e,t,{inGamut:n}={}){e=ta(e);let a=(t=jn.get(t)).from(e),i={space:t,coords:a,alpha:e.alpha};return n&&(i=ga(i)),i}ga.returns="color",ma.returns="color",jn.register(ea);var _a=new class{constructor(){this.javaVersions=new Map;const e=[],n=[],a=[];for(const i of t(Rn).versions){const t=i.base_colors.map((e=>{const t=Vn(e);return{space:ea,coords:t.coords,alpha:t.alpha}})),r=[180,220,255,135];for(const e of t)for(const t of r){const i={space:ea,coords:structuredClone(e.coords),alpha:e.alpha};for(let e=0;e<=2;e++)i.coords[e]=Math.floor(i.coords[e]*t)/255;const r=ma(i,Gn);n.push(i),a.push(r)}e.push(...t);const s=new Ln(i.id,i.name,new Date(i.date),Array.from(e),Array.from(n),Array.from(a));this.javaVersions.set(i.id,s)}}};class wa extends fn{static get elementName(){return"settings-panel"}constructor(){super(),this.onChangeSettings=e=>{const t=_n.default.settings,n=l(this.mapIdInput.value);if(null===n)throw new Error("Map id is null.");t.mapId=n,t.minecraftVersion=this.minecraftVersionSelect.value,t.resize=this.resizeSelect.value,t.resizeQuality=this.resizeQualitySelect.value,t.background=this.backgroundSelect.value,t.colorDifference=this.colorDifferenceSelect.value,t.dithering=this.ditheringSelect.value,e.target===this.transparencyInputText?this.transparencyInputRange.value=this.transparencyInputText.value:e.target===this.transparencyInputRange&&(this.transparencyInputText.value=this.transparencyInputRange.value);const a=l(this.transparencyInputText.value);if(null===a)throw new Error("Transparency is null.");t.transparency=a,t.autoDownload=this.autoDownloadInput.checked,wn.default.saveSettings(t)},this.mapIdInput=this.getShadowElement("map-id-input"),this.minecraftVersionSelect=this.getShadowElement("minecraft-version-select"),this.resizeSelect=this.getShadowElement("resize-select"),this.resizeQualitySelect=this.getShadowElement("resize-quality-select"),this.backgroundSelect=this.getShadowElement("background-select"),this.colorDifferenceSelect=this.getShadowElement("color-difference-select"),this.ditheringSelect=this.getShadowElement("dithering-select"),this.transparencyInputText=this.getShadowElement("transparency-input-text"),this.transparencyInputRange=this.getShadowElement("transparency-input-range"),this.autoDownloadInput=this.getShadowElement("auto-download-input")}initialize(){this.populateMinecraftVersions(),this.populateOptions(this.resizeSelect,bn),this.populateOptions(this.resizeQualitySelect,vn),this.populateOptions(this.backgroundSelect,yn),this.populateOptions(this.colorDifferenceSelect,kn),this.populateOptions(this.ditheringSelect,xn),this.populateSettings()}populateMinecraftVersions(){for(const e of _a.javaVersions.values())if(null!==e.name){const t=new Option(e.name,e.id);this.minecraftVersionSelect.add(t)}const e=this.minecraftVersionSelect.options[this.minecraftVersionSelect.options.length-1];e.selected=!0,e.defaultSelected=!0}populateOptions(e,t){for(const[n,a]of t){const t=new Option(a.displayText,n);e.add(t),a.defaultSelected&&(t.selected=!0,t.defaultSelected=!0)}}populateSettings(){const e=_n.default.settings;this.mapIdInput.value=e.mapId.toString(),this.minecraftVersionSelect.value=e.minecraftVersion,this.resizeSelect.value=e.resize,this.resizeQualitySelect.value=e.resizeQuality,this.backgroundSelect.value=e.background,this.colorDifferenceSelect.value=e.colorDifference,this.ditheringSelect.value=e.dithering,this.transparencyInputText.value=e.transparency.toString(),this.transparencyInputRange.value=e.transparency.toString(),this.autoDownloadInput.checked=e.autoDownload}registerEventListeners(){this.mapIdInput.addEventListener("input",this.onChangeSettings),this.minecraftVersionSelect.addEventListener("input",this.onChangeSettings),this.resizeSelect.addEventListener("input",this.onChangeSettings),this.resizeQualitySelect.addEventListener("input",this.onChangeSettings),this.backgroundSelect.addEventListener("input",this.onChangeSettings),this.colorDifferenceSelect.addEventListener("input",this.onChangeSettings),this.ditheringSelect.addEventListener("input",this.onChangeSettings),this.transparencyInputText.addEventListener("input",this.onChangeSettings),this.transparencyInputRange.addEventListener("input",this.onChangeSettings),this.autoDownloadInput.addEventListener("input",this.onChangeSettings)}set mapId(e){this.mapIdInput.value=e.toString()}get mapId(){const e=this.mapIdInput.value,t=l(e);if(null===t)throw new Error(`Could not convert map id value '${e}' to integer.`);return t}}var ba={};e(ba,"default",(()=>Da),(e=>Da=e));var va={};function ya(e,t){const n=document.createElement("li");n.textContent=t,e.appendChild(n)}e(va,"default",(()=>xa),(e=>xa=e));var ka=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{l(a.next(e))}catch(e){r(e)}}function o(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};class xa extends fn{static get elementName(){return"upload-progress-panel"}constructor(e,t,n){super(),this.uploadProgressPanel=this.getShadowElement("upload-progress-panel"),this.imageFilenameHeading=this.getShadowElement("image-filename-heading"),this.statusHeading=this.getShadowElement("status-heading"),this.mapFilenameHeading=this.getShadowElement("map-filename-heading"),this.imagePreviewMap=new Map,this.imagePreviewMap.set("source",this.getShadowElement("source-image-preview")),this.imagePreviewMap.set("intermediate",this.getShadowElement("intermediate-image-preview")),this.imagePreviewMap.set("final",this.getShadowElement("final-image-preview")),this.downloadFileLink=this.getShadowElement("download-file-link"),this.downloadFileTextLink=this.getShadowElement("download-file-text-link"),this.preprocessSettingsList=this.getShadowElement("preprocess-settings-list"),this.reduceColorSettingsList=this.getShadowElement("reduce-colors-settings-list"),this.createFileSettingsList=this.getShadowElement("create-file-settings-list"),this.startingMapId=e.mapId,this.autoDownload=e.autoDownload;const a=(0,o.getFileSizeTextInReadableUnits)(n);this.imageFilenameHeading.textContent=`${t} (${a})`,this.statusHeading.textContent="Processing... (0%)",this.mapFilenameHeading.textContent=(0,o.getMapFilename)(this.startingMapId),ya(this.preprocessSettingsList,`Resize to: ${e.resizeDisplayText}`),ya(this.preprocessSettingsList,`Quality: ${e.resizeQualityDisplayText}`),ya(this.preprocessSettingsList,`Background: ${e.backgroundDisplayText}`),ya(this.reduceColorSettingsList,`Color Diff: ${e.colorDifferenceDisplayText}`),ya(this.reduceColorSettingsList,`Dither: ${e.ditheringDisplayText}`),ya(this.reduceColorSettingsList,`Transparency: ${e.transparency}`),ya(this.createFileSettingsList,"Auto-download: "+(e.autoDownload?"Yes":"No"))}initialize(){}renderImagePreview(e,t){return ka(this,void 0,void 0,(function*(){const n=this.imagePreviewMap.get(e);if(void 0===n)throw new Error(`Upload step has no canvas: ${e}`);n.render(t)}))}completeUpload(e,t,n,a){const i=(0,o.getMapFilename)(this.startingMapId),r=(0,o.getFileSizeTextInReadableUnits)(t);this.mapFilenameHeading.textContent=`${i} (${r})`,this.downloadFileLink.href=e,this.downloadFileLink.download=i,this.downloadFileLink.textContent="task",this.downloadFileTextLink.href=e,this.downloadFileTextLink.download=i,this.autoDownload&&this.downloadFileTextLink.click(),this.progressPercentage=100;const s=d(n/1e3,3);this.statusHeading.textContent=`Processed ${a} colors in ${s} seconds.`}set progressPercentage(e){if(e<0||e>100)throw new Error("Percent must be between 0 or 100.");const t=`linear-gradient(\n      to right,\n      ${100===e?"#bbffbb":"paleturquoise"} 0% ${e}%,\n      lightskyblue ${e}% 100%)`;this.uploadProgressPanel.style.background=t,this.statusHeading.textContent=`Processing... (${e}%)`}failUpload(e){this.uploadProgressPanel.classList.add("upload-progress-panel_error"),this.downloadFileLink.textContent="close",this.statusHeading.classList.add("upload-progress-panel__status-heading_error"),this.statusHeading.textContent=`Error - ${e}`}}var Ea=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{l(a.next(e))}catch(e){r(e)}}function o(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};var Sa,za;za=function(e,t,n){if(t===self.location.origin)return e;var a=n?"import "+JSON.stringify(e)+";":"importScripts("+JSON.stringify(e)+");";return URL.createObjectURL(new Blob([a],{type:"application/javascript"}))};let Ia=new URL(r("27Lyk").resolve("EBXIW"),import.meta.url);Sa=za(Ia.toString(),Ia.origin,!0);class Da extends fn{static get elementName(){return"uploads-panel"}constructor(){super(),this.dragEnterCounter=0,this.onClickChooseFileButton=e=>{e.preventDefault(),this.fileInput.click()},this.onFileSelected=()=>{const e=this.fileInput.files;if(null===e)throw new Error("No file selected.");this.uploadFiles(e),this.fileInput.value=""},this.onFileDragEnter=()=>{this.dragEnterCounter++,this.fileUploadDropZone.classList.add("uploads-panel__file-upload-drop-zone_drag-enter")},this.onFileDragLeave=()=>{this.dragEnterCounter--,0===this.dragEnterCounter&&this.fileUploadDropZone.classList.remove("uploads-panel__file-upload-drop-zone_drag-enter")},this.onFileDragOver=e=>{e.preventDefault()},this.onFileDropped=e=>{var t;e.preventDefault(),this.dragEnterCounter=0,this.fileUploadDropZone.classList.remove("uploads-panel__file-upload-drop-zone_drag-enter");const n=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;if(!n)throw new Error("No file data found.");this.uploadFiles(n)},this.fileInput=this.getShadowElement("file-input"),this.uploadsContainer=this.getShadowElement("uploads-container"),this.chooseFilesButton=this.getShadowElement("choose-files-button"),this.fileUploadDropZone=this.getShadowElement("file-upload-drop-zone")}initialize(){this.fileInput.addEventListener("change",this.onFileSelected),this.chooseFilesButton.addEventListener("click",this.onClickChooseFileButton),this.fileUploadDropZone.addEventListener("dragenter",this.onFileDragEnter),this.fileUploadDropZone.addEventListener("dragleave",this.onFileDragLeave),this.fileUploadDropZone.addEventListener("dragover",this.onFileDragOver),this.fileUploadDropZone.addEventListener("drop",this.onFileDropped)}uploadFiles(e){return Ea(this,void 0,void 0,(function*(){const t=Array.from(e),n=_n.default.settings;for(const e of t)yield this.uploadFile(n,e),n.mapId++;wn.default.saveSettings(n);const a=new CustomEvent("mapIdUpdated",{bubbles:!0,composed:!0,detail:{mapId:n.mapId}});this.dispatchEvent(a)}))}uploadFile(e,t){return Ea(this,void 0,void 0,(function*(){const n=new(0,va.default)(e,t.name,t.size);this.uploadsContainer.appendChild(n);try{if(!["image/png","image/jpeg","image/gif","image/webp"].includes(t.type))throw new Error(`Invalid file type: ${t.type}`);const a=new Worker(Sa);a.addEventListener("message",(e=>Ea(this,void 0,void 0,(function*(){const t=e.data;switch(t.step){case"error":n.failUpload(t.data);break;case"progress":n.progressPercentage=t.data;break;case"download":const e=t.data,a=(0,o.createDownloadUrlFromData)(e,"application/octet-stream"),i=e.byteLength,r=t.timeElapsed,s=t.colorsProcessed;n.completeUpload(a,i,r,s);break;case"source":case"intermediate":case"final":yield n.renderImagePreview(t.step,t.data);break;default:throw new Error(`Invalid upload step: ${t.step}`)}}))));const i={settings:e,file:t};a.postMessage(i)}catch(e){if(!(e instanceof Error))throw e;n.failUpload(e.message)}}))}}var Aa={};e(Aa,"default",(()=>Fa),(e=>Fa=e));class Ta extends s.default{static get subdirectory(){return"hover"}constructor(){super()}initialize(){}}var Ca={};e(Ca,"drawImageToCanvas",(()=>Ra),(e=>Ra=e));var La=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{l(a.next(e))}catch(e){r(e)}}function o(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};function Ra(e,t,n="fit",a="high"){return La(this,void 0,void 0,(function*(){const i=yield createImageBitmap(e);let r,s,o,l;if("stretch"===n)r=0,s=0,o=t.width,l=t.height;else{const e=t.width/i.width,a=t.height/i.height;let d;if("fit"===n)d=Math.min(e,a);else{if("fill"!==n)throw new Error(`Unknown resize type: ${n}`);d=Math.max(e,a)}r=t.width/2-i.width/2*d,s=t.height/2-i.height/2*d,o=i.width*d,l=i.height*d}const d=t.getContext("2d");if(null===d)throw new Error("Canvas context is null.");"pixelated"===a?d.imageSmoothingEnabled=!1:(d.imageSmoothingEnabled=!0,d.imageSmoothingQuality=a),d.drawImage(i,r,s,o,l)}))}var Ma=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{l(a.next(e))}catch(e){r(e)}}function o(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};class Fa extends Ta{static get elementName(){return"image-preview"}constructor(){super(),this.mainCanvas=this.getShadowElement("main-canvas"),this.largeCanvas=this.getShadowElement("large-canvas")}initialize(){}drawItemFrame(e){return Ma(this,void 0,void 0,(function*(){yield(0,Ca.drawImageToCanvas)(e,this.mainCanvas,"fit","pixelated"),yield(0,Ca.drawImageToCanvas)(e,this.largeCanvas,"fit","pixelated")}))}render(e){return Ma(this,void 0,void 0,(function*(){yield(0,Ca.drawImageToCanvas)(e,this.mainCanvas),yield(0,Ca.drawImageToCanvas)(e,this.largeCanvas)}))}}class Za extends Ta{static get elementName(){return"settings-tooltip"}constructor(){super()}initialize(){}}var Ua={};e(Ua,"default",(()=>Oa),(e=>Oa=e));var Na=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{l(a.next(e))}catch(e){r(e)}}function o(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};class Oa extends HTMLInputElement{static define(){return Na(this,void 0,void 0,(function*(){const e="integer-input";void 0===customElements.get(e)&&customElements.define(e,this,{extends:"input"})}))}constructor(){super(),this.isInitialized=!1}connectedCallback(){this.isConnected&&!this.isInitialized&&(this.addEventListener("input",this.onInput),this.isInitialized=!0)}onInput(){let e=this.valueAsInt;const t=this.minAsInt,n=this.maxAsInt;this.value=null!==e?null!==t&&e<t?this.min:null!==n&&e>n?this.max:e.toString():this.min}get valueAsInt(){return l(this.value)}get minAsInt(){return l(this.min)}get maxAsInt(){return l(this.max)}}var Ba=function(e,t,n,a){return new(n||(n=Promise))((function(i,r){function s(e){try{l(a.next(e))}catch(e){r(e)}}function o(e){try{l(a.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,o)}l((a=a.apply(e,t||[])).next())}))};!function(){Ba(this,void 0,void 0,(function*(){_n.default.init(),yield function(){return Ba(this,void 0,void 0,(function*(){const e=[gn,mn,wa,ba.default,va.default,Aa.default,Za,Ua.default];for(const t of e)yield t.define()}))}(),document.getElementById("application-container").registerSettingsPanelEventListeners()}))}();
//# sourceMappingURL=index.6336e772.js.map
